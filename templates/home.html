{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="text-center mb-12">
    <h1 class="text-5xl font-bold text-slate-900 mb-4">
        Fresh Dropped Domains, Updated Daily
    </h1>
    <p class="text-xl text-slate-600 mb-8">
        ExpiredDomain.dev tracks drops from ICANN CZDS zone files for selected TLDs.
    </p>
    <div class="flex justify-center gap-4">
        <a href="/drops" class="bg-slate-900 text-white px-6 py-3 rounded-lg font-medium hover:bg-slate-800 transition">
            View Today's Drops
        </a>
        <a href="/tlds" class="bg-white text-slate-900 px-6 py-3 rounded-lg font-medium border border-slate-300 hover:bg-slate-50 transition">
            Browse by TLD
        </a>
    </div>
</div>

<!-- Stats Row -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
    <div class="bg-white rounded-2xl shadow-sm p-6">
        <div class="text-3xl font-bold text-slate-900 mb-2">{{ tld_count }}</div>
        <div class="text-slate-600">Tracked TLDs</div>
    </div>
    <div class="bg-white rounded-2xl shadow-sm p-6">
        <div class="text-3xl font-bold text-slate-900 mb-2">
            {% if latest_date %}{{ latest_date.strftime('%Y-%m-%d') }}{% else %}N/A{% endif %}
        </div>
        <div class="text-slate-600">Latest Drop Date</div>
    </div>
    <div class="bg-white rounded-2xl shadow-sm p-6">
        <div class="text-3xl font-bold text-slate-900 mb-2">{{ latest_drop_count }}</div>
        <div class="text-slate-600">Drops on Latest Day</div>
    </div>
</div>

<!-- Preview Table -->
<div class="bg-white rounded-2xl shadow-sm p-6">
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold text-slate-900">Latest Drops Preview</h2>
        <a href="/drops" class="text-slate-600 hover:text-slate-900 font-medium">
            See all drops â†’
        </a>
    </div>
    
    {% if preview_drops %}
    <div class="overflow-x-auto">
        <table class="w-full">
            <thead>
                <tr class="border-b border-slate-200">
                    <th class="text-left py-3 px-4 text-slate-700 font-medium">Domain</th>
                    <th class="text-left py-3 px-4 text-slate-700 font-medium">TLD</th>
                    <th class="text-left py-3 px-4 text-slate-700 font-medium">Drop Date</th>
                    <th class="text-left py-3 px-4 text-slate-700 font-medium">Length</th>
                    <th class="text-left py-3 px-4 text-slate-700 font-medium">Charset</th>
                </tr>
            </thead>
            <tbody>
                {% for drop in preview_drops %}
                <tr class="border-b border-slate-100 hover:bg-slate-50">
                    <td class="py-3 px-4 font-mono text-slate-900">{{ drop.domain }}</td>
                    <td class="py-3 px-4 text-slate-600">.{{ drop.tld }}</td>
                    <td class="py-3 px-4 text-slate-600">{{ drop.drop_date.strftime('%Y-%m-%d') }}</td>
                    <td class="py-3 px-4 text-slate-600">{{ drop.length }}</td>
                    <td class="py-3 px-4">
                        <span class="px-2 py-1 rounded text-xs font-medium
                            {% if drop.charset_type == 'letters' %}bg-blue-100 text-blue-800
                            {% elif drop.charset_type == 'numbers' %}bg-green-100 text-green-800
                            {% else %}bg-purple-100 text-purple-800{% endif %}">
                            {{ drop.charset_type }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center py-12 text-slate-500">
        No drops available yet. Run the daily script to import data.
    </div>
    {% endif %}
</div>
{% endblock %}

